\documentclass[a4paper,twoside,12pt]{article}

\usepackage{amsthm,amsmath,amssymb}

\newtheorem{theorem}{Theorem}
\newtheorem{proposition}{Proposition}
\theoremstyle{definition}
\newtheorem{definition}{Definition}
\theoremstyle{remark}
\newtheorem{remark}{Remark}

\newcommand{\NN}{\mathbb{N}}
\newcommand{\subst}{\mathtt{subst}}
\newcommand{\refe}{\mathtt{ref}}
\newcommand{\TT}{\mathtt{T}}
\newcommand{\MM}{\mathtt{M}}
\newcommand{\msubst}{\mathtt{msubst}}

\title{Substoids}
\author{Andr\'e Hirschowitz \and Marco Maggesi}
\date{April 2017}

\begin{document}
\maketitle

\begin{abstract}
  We present a simple algebraic structure that helps to reason about
  higher-order syntax and semantics using de Bruijn's nameless
  encoding.
\end{abstract}

\section{Introduction}
\label{sec:intro}
To be done.
Advantages:
\begin{itemize}
\item Help to reason about de Bruijn encoding: write \emph{fusion
    laws} without pain.
\item Simple: just three easy axioms, category-theoretic in nature,
  but Category Theory not strictly required.
\item Basic: can be formalized idiomatically in HOL, no dependent
  types required.
\end{itemize}

\section{Basic Definitions and Examples}
\label{sec:basic-def}

\subsection{Definition of Substoid}
\label{sec:basic-defin-example}

\begin{definition}[Substoid]
  A \emph{substoid} is given by a type $\TT$ and two functions
  \begin{align*}
    \mathtt{ref} &\colon \NN \to \TT, \\
    \mathtt{subst} &\colon (\NN \to \TT) \to \TT \to \TT
  \end{align*}
  called \emph{reference} and \emph{substitution}, satisfying the
  following three conditions
  \begin{align*}
    \subst\ f\ (\refe\ i) &=  f\ i \\
    \subst\ \refe\ x &=  x \\
    \subst\ f\ (\subst\ g\ x) &= \subst\ (\subst\ f \cdot g)\ x
  \end{align*}
  for all $x : \TT$, $i :\NN$ and $f,g\colon \NN \to \TT$.
\end{definition}

\textbf{ToDo: examples:}
\begin{itemize}
\item The trivial substoid $\NN$.
\item The `free monoid' substoid $\mathtt{list}(\NN)$.
\item Lambda calculus modulo $\alpha$ (both syntactic $\Lambda$ and
  semantic $\Lambda_{\beta\eta}$).
\item HOCore.
\end{itemize}

\subsection{Substoids and relative monads}
\label{sec:subst-rel-monads}

\begin{definition}[Relative Monad]
  A \emph{relative monad} over a functor $J\colon \mathsf{J}\to \mathsf{C}$
  is given by
  \begin{itemize}
  \item a mapping $M:\mathop{\hbox{ob}} \mathsf{J} \to \mathsf{C}$;
  \item for every object $X$ of $\mathsf{J}$, an arrow $\eta_X\colon
    J(X) \to M(X)$;
  \item for every pair of objects $X,Y$ of $\mathsf{J}$, and for every
    arrow $f\colon J(X) \to M(Y)$, a \emph{Kleisli extension} $\sigma\
    k\colon M(X) \to M(Y)$
  \end{itemize}
  satisfying the relations
  ToDo
\end{definition}

Now take $\mathsf{J}\stackrel{\mathsf{def}}{=}*$ the final category
(i.e., the category with just one object and one arrow) and
$\mathsf{C}\stackrel{\mathsf{def}}{=}\langle\NN\rangle$ the monoid given
by the maps $\NN\to\NN$ (in other words, the full subcategory of
$\mathsf{Set}$ generated by $\NN$).  There is an unique functor
$J\colon \mathsf{J} \to \mathsf{C}$.

\begin{proposition}[Every substoid is relative monad over $J$]
  Given a substoid $\TT$, define
  \begin{align*}
    M\, * &\stackrel{\mathsf{def}}{=} \TT, \\
    \eta_* &\stackrel{\mathsf{def}}{=} \refe, \\
    \sigma\, f &\stackrel{\mathsf{def}}{=} \subst\ f
                 \qquad\text{for all $f:\NN\to\TT$}.
  \end{align*}
  Then $M,\eta,\sigma$ is a relative monad over $J$.
\end{proposition}

\textbf{Open Problem(?), definition of \emph{Free Reference}:}
Define 'free references' in the theory of substoids:
\begin{enumerate}
\item As an example, consider $\Lambda$, the substoid of
  $\lambda$-calculus (syntactic or semantic as you prefer).
\item It is easy to define inductive relation
  $i\ \mathtt{free\_in}\ x$.
\item The key property is
  \begin{equation*}
    \subst\ f\ x = x \Longleftrightarrow
    (\forall i.\, i\ \mathtt{free\_in}\ x \Longrightarrow f\ i = i)
  \end{equation*}
\item \textbf{Question:} Can we turn the above theorem into a
  \emph{substoidal} definition of \emph{free reference}?
\end{enumerate}

\section{Modules over substoids}
\label{sec:modules}

\begin{definition}[Modules of a substoid]
  A \emph{module} of a substoid $\TT$ is a type $\MM$ with an
  \emph{action}
  \begin{equation*}
    \msubst\colon (\NN\to \TT) \to \MM \to \MM
  \end{equation*}
  satisfying the laws
  \begin{align*}
    \msubst\ \refe\ x &= x\\
    \msubst\ f\ (\msubst\ g\ x) &= \msubst\ (\subst f \cdot g)\ x
  \end{align*}
  for all $x\in \MM$ and $f,g\colon \NN \to \TT$.
\end{definition}

Examples:
\begin{itemize}
\item Every substoid is a module over itself.
\item Arbitrary products of substoids.
\end{itemize}

\textbf{ToDo: Derived substoid.}

\end{document}

%  LocalWords:  substoid substoids
